<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>Collider</title>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
</head>
<body>
  <script>

    var w = window.innerWidth;
    var h = window.innerHeight;
    var radius = 10;

    var dragmove = function(d){
      d3.select(this)
          .attr("cx", d.x = Math.max(radius, Math.min(w - radius, d3.event.x)))
          .attr("cy", d.y = Math.max(radius, Math.min(h - radius, d3.event.y)));
    }

    var drag = d3.behavior.drag().on("drag", dragmove);

    var svg = d3.select("body")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

    var dataset = d3.range(50);

    var player = svg.selectAll("circle").data([0]).enter().append("circle").call(drag);
    player.attr({ r: 10, cx: w/2, cy: h/2}).attr('fill', 'red');

    var circles = svg.selectAll("circle")
                     .data(dataset)
                     .enter()
                     .append("circle");
     circles.attr({r: 10, cx: function(d) { return Math.random()*w }, cy: function(d) { return Math.random()*h }});

     circles.each(function(d){
              var that = this;
              setInterval(function(){d3.select(that)
                .transition()
                .duration(2000)
                .attr({r: 10, cx: function(d) { return Math.random()*w }, cy: function(d) { return Math.random()*h }})}, 2000);
           });

  </script>
</body>
</html>
